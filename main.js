(()=>{"use strict";var e=Array.from(document.querySelectorAll(".popup")),t=document.forms.profileForm,r=t.querySelector(".form__item_type_name"),o=t.querySelector(".form__item_type_discription"),n=document.querySelector(".profile__name"),c=document.querySelector(".profile__description");function i(e){var t=document.querySelector(".popup_opened");t&&"Escape"===e.key&&u(t)}function a(e){e.classList.add("popup_opened"),document.addEventListener("keydown",i)}function u(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",i)}e.forEach((function(e){e.addEventListener("click",(function(t){t.target===e&&u(e)}))}));var l=document.querySelector("#photo-grid-item-template").content.querySelector(".photo-grid__container"),s=document.querySelector(".photo-grid"),d=document.forms.cardForm,p=d.querySelector(".form__item_type_placeName"),m=d.querySelector(".form__item_type_imgLink"),f=document.querySelector("#fullCardPopup"),_=f.querySelector(".popup__full-image"),v=f.querySelector(".popup__title"),y=f.querySelector(".popup__close");function S(e,t){var r=l.cloneNode(!0),o=r.querySelector(".photo-grid__item");o.src=e;var n=r.querySelector(".photo-grid__title");o.alt=t,n.textContent=t,r.querySelector(".photo-grid__delete-img").addEventListener("click",(function(){r.remove()}));var c=r.querySelector(".photo-grid__heart");return c.addEventListener("click",(function(){c.classList.toggle("photo-grid__heart_type_active")})),o.addEventListener("click",(function(e){a(f),function(e){_.src=e.target.src,_.alt=e.target.alt,v.textContent=e.target.alt}(e)})),r}function q(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.removeAttribute("disabled"),t.classList.remove(r.inactiveButtonClass)):(t.setAttribute("disabled",!0),t.classList.add(r.inactiveButtonClass))}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=S(e.link,e.name);s.append(t)}));var k,g=document.querySelector(".profile__pen"),h=document.querySelector("#profilePopup"),L=h.querySelector(".popup__close"),E=document.querySelector("#cardPopup"),C=document.querySelector(".profile__add-button"),b=E.querySelector(".popup__close");k={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__item-error_active"},Array.from(document.querySelectorAll(k.formSelector)).forEach((function(e){!function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);q(r,o,t),r.forEach((function(n){n.addEventListener("input",(function(){!function(e,t,r){t.validity.valid?function(e,t,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),o.classList.remove(r.errorClass),o.textContent=""}(e,t,r):function(e,t,r,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),n.textContent=r,n.classList.add(o.errorClass)}(e,t,t.validationMessage,r)}(e,n,t),q(r,o,t)}))}))}(e,k)})),g.addEventListener("click",(function(){a(h),r.textContent=n.value,o.textContent=c.value})),L.addEventListener("click",(function(){u(h)})),t.addEventListener("submit",(function(e){u(h),e.preventDefault(),n.textContent=r.value,c.textContent=o.value})),C.addEventListener("click",(function(){a(E)})),b.addEventListener("click",(function(){u(E)})),d.addEventListener("submit",(function(e){var t;u(E),(t=e).preventDefault(),s.prepend(S(m.value,p.value)),t.target.reset()})),y.addEventListener("click",(function(){u(f)}))})();