(()=>{"use strict";var e={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__item-error_active"},t=(Array.from(document.querySelectorAll(".popup")),document.forms.profileForm),r=t.querySelector(".form__item_type_name"),o=t.querySelector(".form__item_type_discription"),n=document.querySelector(".profile__name"),c=document.querySelector(".profile__description");function i(e){"Escape"===e.key&&l(document.querySelector(".popup_opened"))}function u(e){e.classList.add("popup_opened"),document.addEventListener("keydown",i)}function l(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",i)}var a=document.querySelector("#photo-grid-item-template").content.querySelector(".photo-grid__container"),s=document.querySelector(".photo-grid"),d=document.forms.cardForm,p=d.querySelector(".form__item_type_placeName"),m=d.querySelector(".form__item_type_imgLink"),f=document.querySelector("#fullCardPopup"),_=f.querySelector(".popup__full-image"),v=f.querySelector(".popup__title"),y=f.querySelector(".popup__close");function S(e,t){var r=a.cloneNode(!0),o=r.querySelector(".photo-grid__item");o.src=e;var n=r.querySelector(".photo-grid__title");o.alt=t,n.textContent=t,r.querySelector(".photo-grid__delete-img").addEventListener("click",(function(){r.remove()}));var c=r.querySelector(".photo-grid__heart");return c.addEventListener("click",(function(){c.classList.toggle("photo-grid__heart_type_active")})),o.addEventListener("click",(function(e){u(f),function(e){_.src=e.target.src,_.alt=e.target.alt,v.textContent=e.target.alt}(e)})),r}function q(e,t,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),o.classList.remove(r.errorClass),o.textContent=""}function g(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.removeAttribute("disabled"),t.classList.remove(r.inactiveButtonClass)):(t.setAttribute("disabled",!0),t.classList.add(r.inactiveButtonClass))}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=S(e.link,e.name);s.append(t)}));var k,h=document.querySelector(".profile__pen"),L=document.querySelector("#profilePopup"),E=L.querySelector(".popup__close"),C=document.querySelector("#cardPopup"),b=document.querySelector(".profile__add-button"),x=C.querySelector(".popup__close");k=e,Array.from(document.querySelectorAll(k.formSelector)).forEach((function(e){!function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);g(r,o,t),r.forEach((function(n){n.addEventListener("input",(function(){!function(e,t,r){t.validity.valid?q(e,t,r):function(e,t,r,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),n.textContent=r,n.classList.add(o.errorClass)}(e,t,t.validationMessage,r)}(e,n,t),g(r,o,t)}))}))}(e,k)})),console.log("сработала валидация"),h.addEventListener("click",(function(e){u(L),function(e){e.preventDefault(),r.value=n.textContent,o.value=c.textContent}(e)})),E.addEventListener("click",(function(){l(L)})),t.addEventListener("submit",(function(e){l(L),function(e){e.preventDefault(),n.textContent=r.value,c.textContent=o.value}(e)})),b.addEventListener("click",(function(){!function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);r.forEach((function(r){return q(e,r,t)})),g(r,o,t)}(d,e),d.reset(),u(C)})),x.addEventListener("click",(function(){l(C)})),d.addEventListener("submit",(function(e){var t;l(C),(t=e).preventDefault(),s.prepend(S(m.value,p.value)),t.target.reset()})),y.addEventListener("click",(function(){l(f)}))})();